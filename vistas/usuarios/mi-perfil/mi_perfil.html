<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Perfil - HIDROGEST</title>
       <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="../../favicon/favicon-16x16.png"
    />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="theme-color" content="#ffffff" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../../colores.css">
    <link rel="stylesheet" href="../usuarios.css">
    <link rel="stylesheet" href="./perfil.css">
  </head>
  <body>

    <!-- Header Superior -->
    <header class="header">
      <div class="header-left">
        <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Abrir menú">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="M3 12H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M3 6H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M3 18H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
        <div class="logo">
          <img src="../../LOGO.png" alt="HIDROGEST Logo">
          <span class="logo-text">HIDROGEST</span>
        </div>
      </div>
      <div class="header-right">
        <div class="notifications">
          <button class="notification-btn" id="notificationBtn">
            <!-- SVG de notificaciones -->
            <span class="notification-badge" id="notificationBadge">3</span>
          </button>
        </div>
        <div class="user-menu">
          <button class="user-btn" id="userBtn">
            <div class="user-avatar">JD</div>
            <div class="user-info">
              <span class="user-name">Juan Doe</span>
              <span class="user-type">Propietario</span>
            </div>
            <!-- Chevron y Dropdown -->
            <svg class="chevron" width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M6 9L12 15L18 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <div class="user-dropdown" id="userDropdown">
              <div class="dropdown-item" data-action="settings">Configuración</div>
              <div class="dropdown-item" data-action="help">Ayuda</div>
              <div class="dropdown-divider"></div>
              <div class="dropdown-item logout" data-action="logout">Cerrar Sesión</div>
            </div>
          </button>
        </div>
      </div>
    </header>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <nav class="sidebar-nav">
        <div class="nav-section">
          <h3 class="nav-title">Principal</h3>
          <ul class="nav-list">
            <li class="nav-item">
              <a href="../dashboard/dashboard.html" class="nav-link">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                  <path
                    d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <polyline
                    points="9,22 9,12 15,12 15,22"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                <span>Dashboard</span>
              </a>
            </li>
            <li class="nav-item active">
              <a href="#" class="nav-link">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                  <path
                    d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <circle
                    cx="12"
                    cy="7"
                    r="4"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                <span>Mi Perfil</span>
              </a>
            </li>
            <li class="nav-item">
              <a href="../calendario/calendario.html" class="nav-link">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                  <rect
                    x="3"
                    y="4"
                    width="18"
                    height="18"
                    rx="2"
                    ry="2"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <line
                    x1="16"
                    y1="2"
                    x2="16"
                    y2="6"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <line
                    x1="8"
                    y1="2"
                    x2="8"
                    y2="6"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <line
                    x1="3"
                    y1="10"
                    x2="21"
                    y2="10"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                <span>Calendario</span>
              </a>
            </li>
          </ul>
        </div>

        <div class="nav-section">
          <h3 class="nav-title">Servicios</h3>
          <ul class="nav-list">
            <li class="nav-item">
              <a href="../incidencias/incidencias.html" class="nav-link">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                  <path
                    d="M10.29 3.86L1.82 18A2 2 0 0 0 3.82 20H20.18A2 2 0 0 0 22.18 18L13.71 3.86A2 2 0 0 0 10.29 3.86Z"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <line
                    x1="12"
                    y1="9"
                    x2="12"
                    y2="13"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <line
                    x1="12"
                    y1="17"
                    x2="12.01"
                    y2="17"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                <span>Reportar Incidencia</span>
              </a>
            </li>
            <li class="nav-item">
              <a href="../mis-reportes/mis-reportes.html" class="nav-link">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                  <path
                    d="M14 2H6A2 2 0 0 0 4 4V20A2 2 0 0 0 6 22H18A2 2 0 0 0 20 20V8L14 2Z"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <polyline
                    points="14,2 14,8 20,8"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <line
                    x1="16"
                    y1="13"
                    x2="8"
                    y2="13"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <line
                    x1="16"
                    y1="17"
                    x2="8"
                    y2="17"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <polyline
                    points="10,9 9,9 8,9"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                <span>Mis Reportes</span>
              </a>
            </li>
          </ul>
        </div>

        <div class="nav-section owner-only">
          <h3 class="nav-title">Propietarios</h3>
          <ul class="nav-list">
            <li class="nav-item">
              <a href="../mis-facturas/mis-facturas.html" class="nav-link">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                  <path
                    d="M14 2H6A2 2 0 0 0 4 4V20A2 2 0 0 0 6 22H18A2 2 0 0 0 20 20V8L14 2Z"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <polyline
                    points="14,2 14,8 20,8"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <line
                    x1="16"
                    y1="13"
                    x2="8"
                    y2="13"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <line
                    x1="16"
                    y1="17"
                    x2="8"
                    y2="17"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <polyline
                    points="10,9 9,9 8,9"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                <span>Mis Facturas</span>
              </a>
            </li>
            <li class="nav-item">
              <a href="../realizar-pago/realizar-pago.html" class="nav-link">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                  <path
                    d="M12 1V23"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M17 5H9.5A3.5 3.5 0 0 0 6 8.5V11A3.5 3.5 0 0 0 9.5 14.5H17"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                <span>Realizar Pago</span>
              </a>
            </li>
            <li class="nav-item">
              <a href="../mis-propiedades/mis-propiedades.html" class="nav-link">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                  <path
                    d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <polyline
                    points="9,22 9,12 15,12 15,22"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                <span>Mis Propiedades</span>
              </a>
            </li>
          </ul>
        </div>
      </nav>
    </aside>

    <!-- Overlay para móviles -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

   <!-- Contenido Principal -->
    <main class="main-content perfil-main">
    <div class="perfil-card">
        <div class="perfil-header">
        <div class="foto-wrapper">
            <img src="./img/sin_foto.png" alt="Foto de perfil" id="fotoPerfil">
            <label for="foto" class="cambiar-foto">📷</label>
            <input type="file" id="foto" name="foto" accept="image/*" hidden>
        </div>
        <h2 class="perfil-nombre">Juan Doe</h2>
        </div>

        <form id="perfilForm" class="perfil-form">
        <!-- 🔹 Sección 1: Datos personales -->
        <h3 class="form-section-title">Datos Personales</h3>
        <div class="form-group">
            <label for="nombre">Nombre completo</label>
            <input type="text" id="nombre" name="nombre" value="Juan Doe">
        </div>

        <div class="form-group">
            <label for="correo">Correo electrónico</label>
            <input type="email" id="correo" name="correo" value="juan.doe@example.com">
        </div>

        <div class="form-group">
            <label for="telefono">Teléfono</label>
            <input type="tel" id="telefono" name="telefono" placeholder="+58 412-1234567">
        </div>

        <div class="form-group">
            <label for="direccion">Dirección</label>
            <input type="text" id="direccion" name="direccion" placeholder="Av. Bolívar, San Juan de Los Morros">
        </div>

        <div class="form-group">
            <label for="password">Contraseña</label>
            <input type="password" id="password" name="password" placeholder="Nueva contraseña">
        </div>

        <!-- 🔹 Sección 2: Datos de ubicación -->
        <h3 class="form-section-title">Ubicación</h3>
        <div class="form-group">
            <label for="municipio">Municipio</label>
            <input type="text" id="municipio" name="municipio" placeholder="Nombre del municipio">
        </div>

        <div class="form-group">
            <label for="barrio">Barrio / Vereda</label>
            <input type="text" id="barrio" name="barrio" placeholder="Nombre del barrio o vereda">
        </div>

        <div class="form-group">
            <label for="coordenadas">Coordenadas (opcional)</label>
            <input type="text" id="coordenadas" name="coordenadas" placeholder="Lat, Lng">
        </div>

        <!-- 🔹 Sección 3: Datos del servicio -->
        <h3 class="form-section-title">Servicio de Agua</h3>
        <div class="form-group">
            <label for="codigoUsuario">Código de Usuario</label>
            <input type="text" id="codigoUsuario" name="codigoUsuario" placeholder="Ej: 00012345">
        </div>

        <div class="form-group">
            <label for="tipoPredio">Tipo de predio</label>
            <select id="tipoPredio" name="tipoPredio">
            <option value="urbano">Urbano</option>
            <option value="rural">Rural</option>
            </select>
        </div>

        <div class="form-group">
            <label for="usoAgua">Uso del agua</label>
            <select id="usoAgua" name="usoAgua">
            <option value="domestico">Doméstico</option>
            <option value="comercial">Comercial</option>
            <option value="institucional">Institucional</option>
            <option value="industrial">Industrial</option>
            </select>
        </div>

        <button type="submit" class="btn">Actualizar Perfil</button>
        </form>
    </div>
    </main>

    <script src="../common.js"></script>
    <script src="../dashboard/dashboard.js"></script>
    <script src="./mi_perfil.js"></script>
    <script>
      // Inicialización del menú móvil
      function initMobileMenu() {
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const sidebar = document.getElementById('sidebar');
        const sidebarOverlay = document.getElementById('sidebarOverlay');
        
        if (mobileMenuBtn && sidebar && sidebarOverlay) {
          // Abrir menú móvil
          mobileMenuBtn.addEventListener('click', function() {
            sidebar.classList.add('active');
            sidebarOverlay.classList.add('active');
            document.body.style.overflow = 'hidden';
          });
          
          // Cerrar menú móvil al hacer clic en el overlay
          sidebarOverlay.addEventListener('click', function() {
            sidebar.classList.remove('active');
            sidebarOverlay.classList.remove('active');
            document.body.style.overflow = '';
          });
          
          // Cerrar menú móvil al hacer clic en un enlace
          const navLinks = sidebar.querySelectorAll('.nav-link');
          navLinks.forEach(link => {
            link.addEventListener('click', function() {
              sidebar.classList.remove('active');
              sidebarOverlay.classList.remove('active');
              document.body.style.overflow = '';
            });
          });
          
          // Cerrar menú móvil con tecla Escape
          document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && sidebar.classList.contains('active')) {
              sidebar.classList.remove('active');
              sidebarOverlay.classList.remove('active');
              document.body.style.overflow = '';
            }
          });
        }
      }

      // Inicializar cuando el DOM esté listo
      document.addEventListener('DOMContentLoaded', function() {
        initMobileMenu();
      });

      const fotoInput = document.getElementById('foto');
      const fotoPerfil = document.getElementById('fotoPerfil');

      fotoInput.addEventListener('change', function() {
        const file = this.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = function(e) {
            fotoPerfil.src = e.target.result;
          }
          reader.readAsDataURL(file);
        }
      });

      document.getElementById('perfilForm').addEventListener('submit', function(e) {
        e.preventDefault();
        alert('Perfil actualizado correctamente!');
      });
    </script>

  </body>
</html>
