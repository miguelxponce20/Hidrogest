<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin  Hidrogest</title>
  <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/vistas/favicon/favicon-16x16.png"
    />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="theme-color" content="#ffffff" />
  <link rel="stylesheet" href="../dashboard.css">
  <link rel="stylesheet" href="admin.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="header-left">
      <div class="logo">
        <img src="../LOGO.png" alt="Logo">
        <span class="logo-text">AdminPanel</span>
      </div>
    </div>
    <div class="header-center">
      <div class="search-bar">
        <input type="text" placeholder="Buscar...">
        <button class="search-btn">ğŸ”</button>
      </div>
    </div>
    <div class="header-right">
      
      <div class="user-menu">
        <button class="user-btn">
          <div class="user-avatar">A</div>
          <div class="user-info">
            <span class="user-name">Admin</span>
            <span class="user-type">Superuser</span>
          </div>
          
        </button>
      </div>
    </div>
  </header>

  <!-- Sidebar -->
  <aside class="sidebar">
    <nav class="sidebar-nav">
      <div class="nav-section">
        <h4 class="nav-title">Principal</h4>
        <ul class="nav-list">
          <li class="nav-item active"><a class="nav-link" href="admin.html">ğŸ“Š Dashboard</a></li>
          <li class="nav-item"><a class="nav-link" href="usuarios.html">ğŸ‘¥ Usuarios</a></li>
          <li class="nav-item"><a class="nav-link" href="reportes.html">ğŸ“¦ Reportes</a></li>
        </ul>
      </div>
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Mapa -->
    <div class="widget">
      <div class="widget-header">
        <h3>Mapa de Operaciones</h3>
      </div>
       <div
        id="map"
        style="height: 300px; border-radius: 12px; margin-bottom: 20px"
      ></div>
    </div>

    <!-- Grid de widgets -->
    <div class="widgets-grid">
      <div class="widget">
        <div class="widget-header">
          <h3>Usuarios activos</h3>
        </div>
        <p>Actualmente: <strong>154</strong> usuarios online</p>
      </div>
      <div class="widget">
        <div class="widget-header">
          <h3>Reportes recientes</h3>
        </div>
        <ul>
          <li>ğŸ”´ Corte en Zona Norte</li>
          <li>ğŸŸ¡ Mantenimiento programado</li>
          <li>ğŸŸ¢ Servicio restablecido</li>
        </ul>
      </div>
      <div class="widget">
        <div class="widget-header">
          <h3>Acciones rÃ¡pidas</h3>
        </div>
        <div class="actions-grid">
          <button class="action-btn primary">
            <span class="action-icon">â•</span>
            <span class="action-text">Nuevo Reporte</span>
          </button>
          <button class="action-btn secondary">
            <span class="action-icon">ğŸ‘¥</span>
            <span class="action-text">Gestionar Usuarios</span>
          </button>
        </div>
      </div>
    </div>
  </main>

  <!-- Modal: Nuevo Reporte -->
<div id="modal-reporte" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3>Nuevo Reporte</h3>
      <button class="modal-close" data-close="modal-reporte">âœ–</button>
    </div>
    <div class="modal-body">
      <form>
        <div class="form-group">
          <label for="titulo">TÃ­tulo</label>
          <input type="text" id="titulo" placeholder="Ej: Corte en zona norte">
        </div>
        <div class="form-group">
          <label for="descripcion">DescripciÃ³n</label>
          <textarea id="descripcion" placeholder="Detalles..."></textarea>
        </div>
        <div class="form-actions">
          <button type="submit" class="btn-primary">Guardar</button>
          <button type="button" class="btn-secondary" data-close="modal-reporte">Cancelar</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- NotificaciÃ³n (Toast) -->
<div id="toast" class="toast">Reporte aprobado âœ…</div>

<!-- Modal: Gestionar Usuarios -->
<div id="modal-usuarios" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3>Gestionar Usuarios</h3>
      <button class="modal-close" data-close="modal-usuarios">âœ–</button>
    </div>
    <div class="modal-body">
      <table class="users-table">
        <thead>
          <tr>
            <th>Nombre</th>
            <th>Correo</th>
            <th>Rol</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Juan PÃ©rez</td>
            <td>juan@example.com</td>
            <td>Administrador</td>
            <td>
              <button class="btn-secondary btn-sm">âœ Editar</button>
              <button class="btn-danger btn-sm">ğŸ—‘ Eliminar</button>
            </td>
          </tr>
          <tr>
            <td>MarÃ­a GÃ³mez</td>
            <td>maria@example.com</td>
            <td>Usuario</td>
            <td>
              <button class="btn-secondary btn-sm">âœ Editar</button>
              <button class="btn-danger btn-sm">ğŸ—‘ Eliminar</button>
            </td>
          </tr>
          <tr>
            <td>Carlos LÃ³pez</td>
            <td>carlos@example.com</td>
            <td>Supervisor</td>
            <td>
              <button class="btn-secondary btn-sm">âœ Editar</button>
              <button class="btn-danger btn-sm">ğŸ—‘ Eliminar</button>
            </td>
          </tr>
        </tbody>
      </table>

      <div class="form-actions">
        <button class="btn-secondary" data-close="modal-usuarios">Cerrar</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal: Confirmar EliminaciÃ³n -->
<div id="modal-confirmar" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3>Confirmar eliminaciÃ³n</h3>
      <button class="modal-close" data-close="modal-confirmar">âœ–</button>
    </div>
    <div class="modal-body">
      <p>âš  Â¿Seguro que deseas eliminar este usuario?</p>
      <div class="form-actions">
        <button id="confirmarEliminar" class="btn-danger">Eliminar</button>
        <button class="btn-secondary" data-close="modal-confirmar">Cancelar</button>
      </div>
    </div>
  </div>
</div>



  <!-- Script Mapa -->
  <script>
    const lat = 9.91152;
    const lon = -67.35377;

    const map = L.map("map").setView([lat, lon], 13);

    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      attribution: "&copy; OpenStreetMap contributors"
    }).addTo(map);

    L.marker([lat, lon]).addTo(map)
      .bindPopup("ğŸ“ San Juan de los Morros, GuÃ¡rico - Venezuela")
      .openPopup();
  </script>

  <script>
  // Modal de Nuevo Reporte
  const modalReporte = document.getElementById("modal-reporte");
  const toast = document.getElementById("toast");

  // Interceptar el submit del formulario
  modalReporte.querySelector("form").addEventListener("submit", e => {
    e.preventDefault(); // Evita recargar
    modalReporte.classList.remove("show"); // Cerrar modal

    // Mostrar toast
    toast.classList.add("show");

    // Ocultar automÃ¡ticamente despuÃ©s de 3s
    setTimeout(() => {
      toast.classList.remove("show");
    }, 3000);
  });
</script>
  <script>
  // Abrir modal segÃºn botÃ³n
  document.querySelector(".action-btn.primary").addEventListener("click", () => {
    document.getElementById("modal-reporte").classList.add("show");
  });

  document.querySelector(".action-btn.secondary").addEventListener("click", () => {
    document.getElementById("modal-usuarios").classList.add("show");
  });

  document.querySelector(".action-btn.success").addEventListener("click", () => {
    document.getElementById("modal-aprobar").classList.add("show");
  });

  // Cerrar modal
  document.querySelectorAll("[data-close]").forEach(el => {
    el.addEventListener("click", () => {
      const id = el.getAttribute("data-close");
      document.getElementById(id).classList.remove("show");
    });
  });

  // Cerrar clickeando fuera
  window.addEventListener("click", e => {
    if (e.target.classList.contains("modal")) {
      e.target.classList.remove("show");
    }
  });
</script>
<script>
  let filaAEliminar = null; // Guardamos la fila seleccionada

  // Cuando se pulsa en "Eliminar" en la tabla
  document.querySelectorAll(".btn-danger.btn-sm").forEach(btn => {
    btn.addEventListener("click", () => {
      filaAEliminar = btn.closest("tr"); // Guardamos la fila
      document.getElementById("modal-confirmar").classList.add("show");
    });
  });

  // Confirmar eliminaciÃ³n
  document.getElementById("confirmarEliminar").addEventListener("click", () => {
    if (filaAEliminar) {
      filaAEliminar.remove(); // Elimina la fila
      filaAEliminar = null;
    }
    document.getElementById("modal-confirmar").classList.remove("show");
  });

  // Cerrar modal (X o botones con data-close)
  document.querySelectorAll("[data-close]").forEach(btn => {
    btn.addEventListener("click", () => {
      const target = btn.getAttribute("data-close");
      document.getElementById(target).classList.remove("show");
    });
  });

  // Cerrar clickeando fuera del contenido
  window.addEventListener("click", e => {
    if (e.target.classList.contains("modal")) {
      e.target.classList.remove("show");
    }
  });

  // Editar usuario (ejemplo simple con alert)
  document.querySelectorAll(".btn-secondary.btn-sm").forEach(btn => {
    btn.addEventListener("click", () => {
      window.location.href = "usuarios.html";
    });
  });
</script>

</body>
</html>